<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Loaded Page</title>
    <!-- GrapesJS 관련 리소스 -->
    <link rel="stylesheet" href="https://unpkg.com/grapesjs/dist/css/grapes.min.css">
    <script src="https://unpkg.com/grapesjs/dist/grapes.min.js"></script>
</head>
<body>
<div id="gjs"></div>

<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function() {
        const editor = grapesjs.init({ headless: true });

        // 예시 컴포넌트 추가
        const components = editor.DomComponents;
        const wrapper = components.addType('wrapper', {
            model: {
                defaults: {
                    tagName: 'div',
                    classes: ['wrapper'],
                    components: [],
                },
            },
        });

        const textComponent = components.addType('text', {
            model: {
                defaults: {
                    tagName: 'p',
                    content: 'Hello, GrapesJS!',
                },
            },
        });

        editor.BlockManager.add('wrapper-block', {
            label: 'Wrapper Block',
            content: '<div class="wrapper">Wrapper Block</div>',
            category: 'Basic',
            attributes: { class: 'gjs-block-section' },
        });

        editor.BlockManager.add('text-block', {
            label: 'Text Block',
            content: '<p>Hello, GrapesJS!</p>',
            category: 'Basic',
            attributes: { class: 'gjs-block-section' },
        });

        // editor.getHtml()를 사용하여 전체 편집 영역의 HTML 가져오기
        const html = editor.getHtml();
        console.log(html);

        // editor.getSelected()를 사용하여 선택된 컴포넌트들의 HTML 가져오기
        const selectedComponents = editor.getSelected();
        if (selectedComponents) {
            const selectedHtml = selectedComponents.map(cmp => cmp.toHTML()).join('');
            console.log(selectedHtml);
        } else {
            console.log('No components selected.');
        }

        // 그 외 로직 추가 가능

    });


</script>
</body>
</html>
